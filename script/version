#!/bin/bash -e
#
# script/version
# mas
#
# Displays the current marketing version of mas.
#

# This no longer works with MARKETING_VERSION build setting in Info.plist
# agvtool what-marketing-version -terse1

MAS_VERSION=$(git describe --abbrev=0 --tags)
MAS_VERSION=${MAS_VERSION#v}

SCRIPT_PATH=$(dirname "$(which "$0")")

cat <<EOF >"${SCRIPT_PATH}/../Sources/MasKit/Package.swift"
// Generated by: script/version
enum Package {
    static let version = "${MAS_VERSION}"
}
EOF

echo "${MAS_VERSION}"
