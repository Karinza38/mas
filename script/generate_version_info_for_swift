#!/bin/bash -eu
#
# script/generate_version_info_for_swift
# mas
#
# Generates a file to provide the mas version to Swift code.
#

mas_dir="$(readlink -fn "$(dirname "${BASH_SOURCE:-"${0}"}")/..")"

if ! cd -- "${mas_dir}"; then
  printf $'Error: Could not cd into mas directory: %s\n' "${mas_dir}" >&2
  exit 1
fi

# Write version to Swift singleton
cat <<EOF >Sources/mas/Package.swift
/// Generated by \`script/generate_version_info_for_swift\`.
enum Package {
    static let version = "$(script/version)"
}
EOF
